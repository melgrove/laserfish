(()=>{"use strict";var e={913:(e,o,t)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getMove=void 0;const n=t(822),r=t(286);let i=1e4,l=-1e4;function s(e,o){if("w"===o){const o=r.whitePawnWinLookup[e];return r.pawnWinRewardLookup[o]}{const o=r.blackPawnWinLookup[e];return r.pawnWinRewardLookup[o]}}function u(e,o){let t={};return t=Object.assign({},e),t=(0,n.newPositionFromMove)(t,o),t}function a(e,o,t,f,p,c,w,b){if(e==b)return function(e,o){const t=(0,n.getResult)(e);if(null!==t)return"w"===t?"b"===o?l:i:"b"===t?"b"===o?i:l:0;let u=0;for(let o in e)"w"===e[o][1]?(u+=r.materialLookup[e[o][0]],"p"===e[o][0]&&(u+=s(o,"w"))):(u-=r.materialLookup[e[o][0]],"p"===e[o][0]&&(u-=s(o,"b")));return"b"===o?-u:u}(o,t);const v=(0,n.getResult)(o);if(null!==v)return"w"===v?"b"===t?l:i:"b"===v?"b"===t?i:l:0;if(f){let r=l,i=null;const s=(0,n.getLegalMoves)(o,t);for(let n of s){let l=a(e+1,u(o,n),t,!1,p,c,!1,b);if(l>r&&(r=l,w&&(i=n)),r>p&&(p=r),c<=p)break}return w?[r,i]:r}{let r=i;const l=(0,n.getLegalMoves)(o,"b"===t?"w":"b");for(let n of l){let i=a(e+1,u(o,n),t,!0,p,c,!1,b);if(i<r&&(r=i),r<c&&(c=r),c<=p)break}return r}}o.getMove=function(e,o=4){const{position:t,turn:r}=(0,n.fenToPosition)(e),s=Date.now(),u=a(0,t,r,!0,l,i,!0,o);console.log(`Took ${((Date.now()-s)/1e3).toFixed(2)}s`);const f=(0,n.newPositionFromMove)(t,u[1]),p=(0,n.positionToFen)(f,"w"===r?"b":"w");return[...u,p]}},286:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.blackPawnWinLookup=o.whitePawnWinLookup=o.pawnWinRewardLookup=o.materialLookup=void 0,o.materialLookup={p:15,n:20,r:65,q:60,k:0},o.pawnWinRewardLookup={0:0,1:40,2:20,3:10,4:0,5:0,6:0,7:0},o.whitePawnWinLookup={11:7,12:6,13:5,14:4,15:5,16:4,17:5,18:4,21:6,22:6,23:5,24:4,25:3,26:4,27:3,28:4,31:5,32:5,33:5,34:4,35:3,36:2,37:3,38:2,41:4,42:4,43:4,44:4,45:3,46:2,47:1,48:2,51:5,52:3,53:3,54:3,55:3,56:2,57:1,58:0,61:4,62:4,63:2,64:2,65:2,66:2,67:1,68:0,71:5,72:3,73:3,74:1,75:1,76:1,77:1,78:0,81:4,82:4,83:2,84:2,85:0,86:0,87:0,88:0},o.blackPawnWinLookup={11:0,12:0,13:0,14:0,15:2,16:2,17:4,18:4,21:0,22:1,23:1,24:1,25:1,26:3,27:3,28:5,31:0,32:1,33:2,34:2,35:2,36:2,37:4,38:4,41:0,42:1,43:2,44:3,45:3,46:3,47:3,48:5,51:2,52:1,53:2,54:3,55:4,56:4,57:4,58:4,61:2,62:3,63:2,64:3,65:4,66:5,67:5,68:5,71:4,72:3,73:4,74:3,75:4,76:5,77:6,78:6,81:4,82:5,83:4,84:5,85:4,86:5,87:6,88:7}},822:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.positionToFen=o.fenToPosition=o.newPositionFromMove=o.getResult=o.getLegalMoves=void 0;const t=[[1,1],[-1,1],[-1,-1],[1,-1]],n=[[1,0],[-1,0],[0,1],[0,-1]],r=[[-2,-1],[-2,1],[-1,2],[1,2],[2,1],[2,-1],[1,-2],[-1,-2]],i=["88","87","86","85","78","68","58"],l=["11","12","13","14","21","31","41"];function s(e,o){const t=parseInt(e[0]),n=parseInt(e[1])+o[1],r=t+o[0];return n<=8&&n>=1&&r<=8&&r>=1?`${r}${n}`:null}o.getLegalMoves=function(e,o){const i=[];for(let l in e){const u=e[l];if(u[1]===o)switch(u[0]){case"r":for(let t of n){let n=s(l,t);for(;null!==n;){if(n in e){e[n][1]!==o&&i.push([l,n,!1]);break}i.push([l,n,!1]),n=s(n,t)}}break;case"n":r.map((e=>s(l,e))).filter((t=>null!==t&&(!(t in e)||e[t][1]!==o))).forEach((e=>i.push([l,e,!1])));break;case"k":[...t,...n].map((e=>s(l,e))).filter((t=>null!==t&&(!(t in e)||e[t][1]!==o))).forEach((e=>i.push([l,e,!1])));break;case"p":t.map((e=>s(l,e))).filter((o=>null!==o&&!(o in e))).forEach((e=>i.push([l,e,!1]))),n.map((e=>s(l,e))).filter((t=>null!==t&&t in e&&e[t][1]!==o)).forEach((e=>i.push([l,e,!1])));break;case"q":for(let o of n){let t=s(l,o);for(;null!==t&&!(t in e);)i.push([l,t,!1]),t=s(t,o)}for(let o of t){let t=l,n=s(l,o),r=!1;for(;null!==n&&(!(n in e)||"r"!==e[n][0]);)r=!0,t=n,n=s(n,o);r&&i.push([l,t,!0])}}}return i},o.getResult=function(e){let o=new Set;for(let t in e)"k"===e[t][0]&&o.add(e[t][1]);if(0===o.size)return"d";if(!o.has("w"))return"b";if(!o.has("b"))return"w";for(let o of i)if(o in e&&"p"===e[o][0]&&"w"===e[o][1])return"w";for(let o of l)if(o in e&&"p"===e[o][0]&&"b"===e[o][1])return"b";const t=Object.values(e);return t.length<=3&&(2===t.length||t.map((e=>e[0])).includes("n"))?"d":null},o.newPositionFromMove=function(e,o){return o[2]?(delete e[o[1]],function(e,o){const t=[],n=parseInt(e[0]),r=parseInt(e[1]),i=[parseInt(o[0])>n?1:-1,parseInt(o[1])>r?1:-1];let l=s(e,i);for(;l!==o;)t.push(l),l=s(l,i);return t}(o[0],o[1]).forEach((o=>{delete e[o]})),e):(e[o[1]]=e[o[0]],delete e[o[0]],e)},o.fenToPosition=function(e){const o={},t=e.split(" "),n=t[0].split("/");for(let e=0;e<n.length;e++){const t=n[e];let r=1;for(let n of t.split("")){const t=parseInt(n);if(isNaN(t)){const t=n.toUpperCase()===n;o[`${r}${8-e}`]=`${n.toLowerCase()}${t?"w":"b"}`,r++}else for(let e=1;e<=t;e++)r++}}return{position:o,turn:t[1]}},o.positionToFen=function(e,o){const t=[];for(let o=8;o>=1;o--){let n=0,r="";for(let t=1;t<=8;t++)`${t}${o}`in e?(0!==n&&(r+=n,n=0),"w"===e[`${t}${o}`][1]?r+=e[`${t}${o}`][0].toUpperCase():r+=e[`${t}${o}`][0]):n++;0!==n&&(r+=n),t.push(r)}const n=`${t.join("/")} ${o}`;return console.log(n),n}}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={exports:{}};return e[n](i,i.exports,t),i.exports}var n={};(()=>{var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.getMove=void 0;const o=t(913);Object.defineProperty(e,"getMove",{enumerable:!0,get:function(){return o.getMove}})})();var r=self;for(var i in n)r[i]=n[i];n.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();